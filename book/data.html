<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data | R Companion for the Textbook Introduction to Data Mining</title>
  <meta name="description" content="This book contains documented R examples to accompany several chapters of the popular data mining text book Introduction to Data Mining by Pang-Ning Tan, Michael Steinbach and Vipin Kumar (1st or 2nd edition)." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data | R Companion for the Textbook Introduction to Data Mining" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book contains documented R examples to accompany several chapters of the popular data mining text book Introduction to Data Mining by Pang-Ning Tan, Michael Steinbach and Vipin Kumar (1st or 2nd edition)." />
  <meta name="github-repo" content="mhahsler/Introduction_to_Data_Mining_R_Examples" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data | R Companion for the Textbook Introduction to Data Mining" />
  
  <meta name="twitter:description" content="This book contains documented R examples to accompany several chapters of the popular data mining text book Introduction to Data Mining by Pang-Ning Tan, Michael Steinbach and Vipin Kumar (1st or 2nd edition)." />
  

<meta name="author" content="Michael Hahsler" />


<meta name="date" content="2021-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="classification-basic-concepts-and-techniques.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/plotly-binding/plotly.js"></script>
<script src="libs/typedarray/typedarray.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main/plotly-latest.min.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider/jquery.nouislider.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<link href="libs/vis/vis.css" rel="stylesheet" />
<script src="libs/vis/vis.min.js"></script>
<script src="libs/visNetwork-binding/visNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Companion for Data Mining</a></li>
<li><a href="http://michael.hahsler.net">by Michael Hahsler</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#the-iris-dataset"><i class="fa fa-check"></i><b>2.1</b> The Iris Dataset</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#data-quality"><i class="fa fa-check"></i><b>2.2</b> Data Quality</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#aggregation"><i class="fa fa-check"></i><b>2.3</b> Aggregation</a></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#sampling"><i class="fa fa-check"></i><b>2.4</b> Sampling</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data.html"><a href="data.html#random-sampling"><i class="fa fa-check"></i><b>2.4.1</b> Random Sampling</a></li>
<li class="chapter" data-level="2.4.2" data-path="data.html"><a href="data.html#stratified-sampling"><i class="fa fa-check"></i><b>2.4.2</b> Stratified Sampling</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#features"><i class="fa fa-check"></i><b>2.5</b> Features</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#dimensionality-reduction"><i class="fa fa-check"></i><b>2.5.1</b> Dimensionality Reduction</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#feature-selection"><i class="fa fa-check"></i><b>2.5.2</b> Feature Selection</a></li>
<li class="chapter" data-level="2.5.3" data-path="data.html"><a href="data.html#discretize-features"><i class="fa fa-check"></i><b>2.5.3</b> Discretize Features</a></li>
<li class="chapter" data-level="2.5.4" data-path="data.html"><a href="data.html#standardize-data"><i class="fa fa-check"></i><b>2.5.4</b> Standardize Data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data.html"><a href="data.html#proximities-similarities-and-distances"><i class="fa fa-check"></i><b>2.6</b> Proximities: Similarities and Distances</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data.html"><a href="data.html#minkowsky-distances"><i class="fa fa-check"></i><b>2.6.1</b> Minkowsky Distances</a></li>
<li class="chapter" data-level="2.6.2" data-path="data.html"><a href="data.html#distances-for-binary-data"><i class="fa fa-check"></i><b>2.6.2</b> Distances for Binary Data</a></li>
<li class="chapter" data-level="2.6.3" data-path="data.html"><a href="data.html#distances-for-mixed-data"><i class="fa fa-check"></i><b>2.6.3</b> Distances for Mixed Data</a></li>
<li class="chapter" data-level="2.6.4" data-path="data.html"><a href="data.html#additional-proximity-measures-available-in-package-proxy"><i class="fa fa-check"></i><b>2.6.4</b> Additional proximity Measures Available in Package proxy</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data.html"><a href="data.html#relationships-between-features"><i class="fa fa-check"></i><b>2.7</b> Relationships Between Features</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="data.html"><a href="data.html#correlation"><i class="fa fa-check"></i><b>2.7.1</b> Correlation</a></li>
<li class="chapter" data-level="2.7.2" data-path="data.html"><a href="data.html#rank-correlation"><i class="fa fa-check"></i><b>2.7.2</b> Rank Correlation</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data.html"><a href="data.html#density-estimation"><i class="fa fa-check"></i><b>2.8</b> Density Estimation</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="data.html"><a href="data.html#histograms"><i class="fa fa-check"></i><b>2.8.1</b> Histograms</a></li>
<li class="chapter" data-level="2.8.2" data-path="data.html"><a href="data.html#kernel-density-estimate-kde"><i class="fa fa-check"></i><b>2.8.2</b> Kernel Density Estimate (KDE)</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="data.html"><a href="data.html#exploring-data"><i class="fa fa-check"></i><b>2.9</b> Exploring Data</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="data.html"><a href="data.html#basic-statistics"><i class="fa fa-check"></i><b>2.9.1</b> Basic statistics</a></li>
<li class="chapter" data-level="2.9.2" data-path="data.html"><a href="data.html#tabulate-data"><i class="fa fa-check"></i><b>2.9.2</b> Tabulate data</a></li>
<li class="chapter" data-level="2.9.3" data-path="data.html"><a href="data.html#percentiles-quantiles"><i class="fa fa-check"></i><b>2.9.3</b> Percentiles (Quantiles)</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="data.html"><a href="data.html#visualization"><i class="fa fa-check"></i><b>2.10</b> Visualization</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="data.html"><a href="data.html#histogram"><i class="fa fa-check"></i><b>2.10.1</b> Histogram</a></li>
<li class="chapter" data-level="2.10.2" data-path="data.html"><a href="data.html#boxplot"><i class="fa fa-check"></i><b>2.10.2</b> Boxplot</a></li>
<li class="chapter" data-level="2.10.3" data-path="data.html"><a href="data.html#scatter-plot"><i class="fa fa-check"></i><b>2.10.3</b> Scatter plot</a></li>
<li class="chapter" data-level="2.10.4" data-path="data.html"><a href="data.html#scatter-plot-matrix"><i class="fa fa-check"></i><b>2.10.4</b> Scatter Plot Matrix</a></li>
<li class="chapter" data-level="2.10.5" data-path="data.html"><a href="data.html#data-matrix-visualization"><i class="fa fa-check"></i><b>2.10.5</b> Data Matrix Visualization</a></li>
<li class="chapter" data-level="2.10.6" data-path="data.html"><a href="data.html#correlation-matrix"><i class="fa fa-check"></i><b>2.10.6</b> Correlation Matrix</a></li>
<li class="chapter" data-level="2.10.7" data-path="data.html"><a href="data.html#parallel-coordinates-plot"><i class="fa fa-check"></i><b>2.10.7</b> Parallel Coordinates Plot</a></li>
<li class="chapter" data-level="2.10.8" data-path="data.html"><a href="data.html#more-visulizations"><i class="fa fa-check"></i><b>2.10.8</b> More Visulizations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html"><i class="fa fa-check"></i><b>3</b> Classification: Basic Concepts and Techniques</a>
<ul>
<li class="chapter" data-level="3.1" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#the-zoo-dataset"><i class="fa fa-check"></i><b>3.1</b> The Zoo Dataset</a></li>
<li class="chapter" data-level="3.2" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#decision-trees"><i class="fa fa-check"></i><b>3.2</b> Decision Trees</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#create-tree-with-default-settings-uses-pre-pruning"><i class="fa fa-check"></i><b>3.2.1</b> Create Tree With Default Settings (uses pre-pruning)</a></li>
<li class="chapter" data-level="3.2.2" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#create-a-full-tree"><i class="fa fa-check"></i><b>3.2.2</b> Create a Full Tree</a></li>
<li class="chapter" data-level="3.2.3" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#make-predictions-for-new-data"><i class="fa fa-check"></i><b>3.2.3</b> Make Predictions for New Data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#model-evaluation-with-caret"><i class="fa fa-check"></i><b>3.3</b> Model Evaluation with Caret</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#hold-out-test-data"><i class="fa fa-check"></i><b>3.3.1</b> Hold out Test Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#learn-a-model-and-tune-hyperparameters-on-the-training-data"><i class="fa fa-check"></i><b>3.3.2</b> Learn a Model and Tune Hyperparameters on the Training Data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#testing-confusion-matrix-and-confidence-interval-for-accuracy"><i class="fa fa-check"></i><b>3.4</b> Testing: Confusion Matrix and Confidence Interval for Accuracy</a></li>
<li class="chapter" data-level="3.5" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#model-comparison"><i class="fa fa-check"></i><b>3.5</b> Model Comparison</a></li>
<li class="chapter" data-level="3.6" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#feature-selection-and-feature-preparation"><i class="fa fa-check"></i><b>3.6</b> Feature Selection and Feature Preparation</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#univariate-feature-importance-score"><i class="fa fa-check"></i><b>3.6.1</b> Univariate Feature Importance Score</a></li>
<li class="chapter" data-level="3.6.2" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#feature-subset-selection"><i class="fa fa-check"></i><b>3.6.2</b> Feature Subset Selection</a></li>
<li class="chapter" data-level="3.6.3" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#using-dummy-variables-for-factors"><i class="fa fa-check"></i><b>3.6.3</b> Using Dummy Variables for Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#class-imbalance"><i class="fa fa-check"></i><b>3.7</b> Class Imbalance</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#option-1-use-the-data-as-is-and-hope-for-the-best"><i class="fa fa-check"></i><b>3.7.1</b> Option 1: Use the Data As Is and Hope For The Best</a></li>
<li class="chapter" data-level="3.7.2" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#option-2-balance-data-with-resampling"><i class="fa fa-check"></i><b>3.7.2</b> Option 2: Balance Data With Resampling</a></li>
<li class="chapter" data-level="3.7.3" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#option-3-build-a-larger-tree-and-use-predicted-probabilities"><i class="fa fa-check"></i><b>3.7.3</b> Option 3: Build A Larger Tree and use Predicted Probabilities</a></li>
<li class="chapter" data-level="3.7.4" data-path="classification-basic-concepts-and-techniques.html"><a href="classification-basic-concepts-and-techniques.html#option-4-use-a-cost-sensitive-classifier"><i class="fa fa-check"></i><b>3.7.4</b> Option 4: Use a Cost-Sensitive Classifier</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html"><i class="fa fa-check"></i><b>4</b> Classification: Alternative Techniques</a>
<ul>
<li class="chapter" data-level="4.1" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#training-and-test-data"><i class="fa fa-check"></i><b>4.1</b> Training and Test Data</a></li>
<li class="chapter" data-level="4.2" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#fitting-different-classification-models-to-the-training-data"><i class="fa fa-check"></i><b>4.2</b> Fitting Different Classification Models to the Training Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#conditional-inference-tree-decision-tree"><i class="fa fa-check"></i><b>4.2.1</b> Conditional Inference Tree (Decision Tree)</a></li>
<li class="chapter" data-level="4.2.2" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#c-4.5-decision-tree"><i class="fa fa-check"></i><b>4.2.2</b> C 4.5 Decision Tree</a></li>
<li class="chapter" data-level="4.2.3" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>4.2.3</b> K-Nearest Neighbors</a></li>
<li class="chapter" data-level="4.2.4" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#part-rule-based-classifier"><i class="fa fa-check"></i><b>4.2.4</b> PART (Rule-based classifier)</a></li>
<li class="chapter" data-level="4.2.5" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#linear-support-vector-machines"><i class="fa fa-check"></i><b>4.2.5</b> Linear Support Vector Machines</a></li>
<li class="chapter" data-level="4.2.6" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#random-forest"><i class="fa fa-check"></i><b>4.2.6</b> Random Forest</a></li>
<li class="chapter" data-level="4.2.7" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#gradient-boosted-decision-trees-xgboost"><i class="fa fa-check"></i><b>4.2.7</b> Gradient Boosted Decision Trees (xgboost)</a></li>
<li class="chapter" data-level="4.2.8" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#artificial-neural-network"><i class="fa fa-check"></i><b>4.2.8</b> Artificial Neural Network</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#comparing-models"><i class="fa fa-check"></i><b>4.3</b> Comparing Models</a></li>
<li class="chapter" data-level="4.4" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#applying-the-chosen-model-to-the-test-data"><i class="fa fa-check"></i><b>4.4</b> Applying the Chosen Model to the Test Data</a></li>
<li class="chapter" data-level="4.5" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#decision-boundaries"><i class="fa fa-check"></i><b>4.5</b> Decision Boundaries</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#iris-dataset"><i class="fa fa-check"></i><b>4.5.1</b> Iris Dataset</a></li>
<li class="chapter" data-level="4.5.2" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#circle-dataset"><i class="fa fa-check"></i><b>4.5.2</b> Circle Dataset</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="classification-alternative-techniques.html"><a href="classification-alternative-techniques.html#more-information"><i class="fa fa-check"></i><b>4.6</b> More Information</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html"><i class="fa fa-check"></i><b>5</b> Association Analysis: Basic Concepts and Algorithms</a>
<ul>
<li class="chapter" data-level="5.1" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#the-arules-package"><i class="fa fa-check"></i><b>5.1</b> The arules Package</a></li>
<li class="chapter" data-level="5.2" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#transactions"><i class="fa fa-check"></i><b>5.2</b> Transactions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#create-transactions"><i class="fa fa-check"></i><b>5.2.1</b> Create Transactions</a></li>
<li class="chapter" data-level="5.2.2" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#inspect-transactions"><i class="fa fa-check"></i><b>5.2.2</b> Inspect Transactions</a></li>
<li class="chapter" data-level="5.2.3" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#vertical-layout-transaction-id-lists"><i class="fa fa-check"></i><b>5.2.3</b> Vertical Layout (Transaction ID Lists)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#frequent-itemsets"><i class="fa fa-check"></i><b>5.3</b> Frequent Itemsets</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#mine-frequent-itemsets"><i class="fa fa-check"></i><b>5.3.1</b> Mine Frequent Itemsets</a></li>
<li class="chapter" data-level="5.3.2" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#concise-representation-of-itemsets"><i class="fa fa-check"></i><b>5.3.2</b> Concise Representation of Itemsets</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#association-rules"><i class="fa fa-check"></i><b>5.4</b> Association Rules</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#mine-association-rules"><i class="fa fa-check"></i><b>5.4.1</b> Mine Association Rules</a></li>
<li class="chapter" data-level="5.4.2" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#calculate-additional-interest-measures"><i class="fa fa-check"></i><b>5.4.2</b> Calculate Additional Interest Measures</a></li>
<li class="chapter" data-level="5.4.3" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#mine-using-templates"><i class="fa fa-check"></i><b>5.4.3</b> Mine Using Templates</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#association-rule-visualization"><i class="fa fa-check"></i><b>5.5</b> Association Rule Visualization</a></li>
<li class="chapter" data-level="5.6" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#interactive-visualizations"><i class="fa fa-check"></i><b>5.6</b> Interactive Visualizations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#interactive-inspect-with-sorting-filtering-and-paging"><i class="fa fa-check"></i><b>5.6.1</b> Interactive Inspect With Sorting, Filtering and Paging</a></li>
<li class="chapter" data-level="5.6.2" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#scatter-plot-1"><i class="fa fa-check"></i><b>5.6.2</b> Scatter Plot</a></li>
<li class="chapter" data-level="5.6.3" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#matrix-visualization"><i class="fa fa-check"></i><b>5.6.3</b> Matrix Visualization</a></li>
<li class="chapter" data-level="5.6.4" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#visualization-as-graph"><i class="fa fa-check"></i><b>5.6.4</b> Visualization as Graph</a></li>
<li class="chapter" data-level="5.6.5" data-path="association-analysis-basic-concepts-and-algorithms.html"><a href="association-analysis-basic-concepts-and-algorithms.html#interactive-rule-explorer"><i class="fa fa-check"></i><b>5.6.5</b> Interactive Rule Explorer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="association-analysis-advanced-concepts.html"><a href="association-analysis-advanced-concepts.html"><i class="fa fa-check"></i><b>6</b> Association Analysis: Advanced Concepts</a></li>
<li class="chapter" data-level="7" data-path="clustering-analysis.html"><a href="clustering-analysis.html"><i class="fa fa-check"></i><b>7</b> Clustering Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="clustering-analysis.html"><a href="clustering-analysis.html#data-preparation"><i class="fa fa-check"></i><b>7.1</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="clustering-analysis.html"><a href="clustering-analysis.html#data-cleaning"><i class="fa fa-check"></i><b>7.1.1</b> Data cleaning</a></li>
<li class="chapter" data-level="7.1.2" data-path="clustering-analysis.html"><a href="clustering-analysis.html#scale-data"><i class="fa fa-check"></i><b>7.1.2</b> Scale data</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="clustering-analysis.html"><a href="clustering-analysis.html#clustering-methods"><i class="fa fa-check"></i><b>7.2</b> Clustering methods</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="clustering-analysis.html"><a href="clustering-analysis.html#k-means-clustering"><i class="fa fa-check"></i><b>7.2.1</b> k-means Clustering</a></li>
<li class="chapter" data-level="7.2.2" data-path="clustering-analysis.html"><a href="clustering-analysis.html#hierarchical-clustering"><i class="fa fa-check"></i><b>7.2.2</b> Hierarchical Clustering</a></li>
<li class="chapter" data-level="7.2.3" data-path="clustering-analysis.html"><a href="clustering-analysis.html#density-based-clustering-with-dbscan"><i class="fa fa-check"></i><b>7.2.3</b> Density-based clustering with DBSCAN</a></li>
<li class="chapter" data-level="7.2.4" data-path="clustering-analysis.html"><a href="clustering-analysis.html#partitioning-around-medoids-pam"><i class="fa fa-check"></i><b>7.2.4</b> Partitioning Around Medoids (PAM)</a></li>
<li class="chapter" data-level="7.2.5" data-path="clustering-analysis.html"><a href="clustering-analysis.html#gaussian-mixture-models"><i class="fa fa-check"></i><b>7.2.5</b> Gaussian Mixture Models</a></li>
<li class="chapter" data-level="7.2.6" data-path="clustering-analysis.html"><a href="clustering-analysis.html#spectral-clustering"><i class="fa fa-check"></i><b>7.2.6</b> Spectral clustering</a></li>
<li class="chapter" data-level="7.2.7" data-path="clustering-analysis.html"><a href="clustering-analysis.html#fuzzy-c-means-clustering"><i class="fa fa-check"></i><b>7.2.7</b> Fuzzy C-Means Clustering</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="clustering-analysis.html"><a href="clustering-analysis.html#internal-cluster-validation"><i class="fa fa-check"></i><b>7.3</b> Internal Cluster Validation</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="clustering-analysis.html"><a href="clustering-analysis.html#compare-the-clustering-quality"><i class="fa fa-check"></i><b>7.3.1</b> Compare the Clustering Quality</a></li>
<li class="chapter" data-level="7.3.2" data-path="clustering-analysis.html"><a href="clustering-analysis.html#silhouette-plot"><i class="fa fa-check"></i><b>7.3.2</b> Silhouette plot</a></li>
<li class="chapter" data-level="7.3.3" data-path="clustering-analysis.html"><a href="clustering-analysis.html#find-optimal-number-of-clusters-for-k-means"><i class="fa fa-check"></i><b>7.3.3</b> Find Optimal Number of Clusters for k-means</a></li>
<li class="chapter" data-level="7.3.4" data-path="clustering-analysis.html"><a href="clustering-analysis.html#visualizing-the-distance-matrix"><i class="fa fa-check"></i><b>7.3.4</b> Visualizing the Distance Matrix</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="clustering-analysis.html"><a href="clustering-analysis.html#external-cluster-validation"><i class="fa fa-check"></i><b>7.4</b> External Cluster Validation</a></li>
<li class="chapter" data-level="7.5" data-path="clustering-analysis.html"><a href="clustering-analysis.html#advanced-data-preparation-for-clustering"><i class="fa fa-check"></i><b>7.5</b> Advanced Data Preparation for Clustering</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="clustering-analysis.html"><a href="clustering-analysis.html#outlier-removal"><i class="fa fa-check"></i><b>7.5.1</b> Outlier Removal</a></li>
<li class="chapter" data-level="7.5.2" data-path="clustering-analysis.html"><a href="clustering-analysis.html#clustering-tendency"><i class="fa fa-check"></i><b>7.5.2</b> Clustering Tendency</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Companion for the Textbook Introduction to Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data</h1>
<p>This chapter gives examples for cleaning and preparing data for data mining.</p>
<p><strong>Packages used for this chapter:</strong> <em>arules</em> <span class="citation">(<a href="#ref-R-arules" role="doc-biblioref">Hahsler, Buchta, Gruen, et al., 2021</a>)</span>, <em>caret</em> <span class="citation">(<a href="#ref-R-caret" role="doc-biblioref">Kuhn, 2021</a>)</span>, <em>factoextra</em> <span class="citation">(<a href="#ref-R-factoextra" role="doc-biblioref">Kassambara &amp; Mundt, 2020</a>)</span>, <em>GGally</em> <span class="citation">(<a href="#ref-R-GGally" role="doc-biblioref">Schloerke et al., 2021</a>)</span>, <em>plotly</em> <span class="citation">(<a href="#ref-R-plotly" role="doc-biblioref">Sievert et al., 2021</a>)</span>, <em>proxy</em> <span class="citation">(<a href="#ref-R-proxy" role="doc-biblioref">Meyer &amp; Buchta, 2021</a>)</span>, <em>sampling</em> <span class="citation">(<a href="#ref-R-sampling" role="doc-biblioref">Tillé &amp; Matei, 2021</a>)</span>, <em>seriation</em> <span class="citation">(<a href="#ref-R-seriation" role="doc-biblioref">Hahsler, Buchta, &amp; Hornik, 2021</a>)</span>, <em>tidyverse</em> <span class="citation">(<a href="#ref-R-tidyverse" role="doc-biblioref">Wickham, 2021c</a>)</span></p>
<div id="the-iris-dataset" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> The Iris Dataset</h2>
<p>We will use a toy dataset that comes with R. <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set">Fisher’s iris data set</a> gives the measurements in centimeters of the variables sepal length and width and petal length and width, respectively, for 150 50 flowers from each of 3 species of iris. The species are Iris Setosa, Iris Versicolor, and Iris Virginica.
For more details see: <code>? iris</code></p>
<p>Load the iris data set and convert the data.frame into a tibble. <em>Note:</em> datasets that come with R or R packages can be loaded with <code>data()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-2"><a href="data.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb11-3"><a href="data.html#cb11-3" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris)</span>
<span id="cb11-4"><a href="data.html#cb11-4" aria-hidden="true" tabindex="-1"></a>iris</span></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1          5.1         3.5          1.4         0.2
##  2          4.9         3            1.4         0.2
##  3          4.7         3.2          1.3         0.2
##  4          4.6         3.1          1.5         0.2
##  5          5           3.6          1.4         0.2
##  6          5.4         3.9          1.7         0.4
##  7          4.6         3.4          1.4         0.3
##  8          5           3.4          1.5         0.2
##  9          4.4         2.9          1.4         0.2
## 10          4.9         3.1          1.5         0.1
## # … with 140 more rows, and 1 more variable:
## #   Species &lt;fct&gt;</code></pre>
<p>We see that the data contains 150 rows (flowers) and 5 features. tibbles only show the first few rows and do not show all features, if they do not fit the screen width. We can force print to show all features by changing the width.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(iris, <span class="at">width =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1          5.1         3.5          1.4         0.2
##  2          4.9         3            1.4         0.2
##  3          4.7         3.2          1.3         0.2
##  4          4.6         3.1          1.5         0.2
##  5          5           3.6          1.4         0.2
##  6          5.4         3.9          1.7         0.4
##  7          4.6         3.4          1.4         0.3
##  8          5           3.4          1.5         0.2
##  9          4.4         2.9          1.4         0.2
## 10          4.9         3.1          1.5         0.1
##    Species
##    &lt;fct&gt;  
##  1 setosa 
##  2 setosa 
##  3 setosa 
##  4 setosa 
##  5 setosa 
##  6 setosa 
##  7 setosa 
##  8 setosa 
##  9 setosa 
## 10 setosa 
## # … with 140 more rows</code></pre>
</div>
<div id="data-quality" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Data Quality</h2>
<p>Assessing the quality of the available data is crucial before we start using the data.
Start with summary statistics for each column to identify outliers and missing values.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length   Sepal.Width    Petal.Length 
##  Min.   :4.30   Min.   :2.00   Min.   :1.00  
##  1st Qu.:5.10   1st Qu.:2.80   1st Qu.:1.60  
##  Median :5.80   Median :3.00   Median :4.35  
##  Mean   :5.84   Mean   :3.06   Mean   :3.76  
##  3rd Qu.:6.40   3rd Qu.:3.30   3rd Qu.:5.10  
##  Max.   :7.90   Max.   :4.40   Max.   :6.90  
##   Petal.Width        Species  
##  Min.   :0.1   setosa    :50  
##  1st Qu.:0.3   versicolor:50  
##  Median :1.3   virginica :50  
##  Mean   :1.2                  
##  3rd Qu.:1.8                  
##  Max.   :2.5</code></pre>
<p>You can also summarize specific columns using a statistic function like <code>mean</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data.html#cb17-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, mean)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         5.84        3.06         3.76        1.20</code></pre>
<p>Another way to inspect your data is to use a scatterplot matrix (we use here <code>ggpairs</code> from package <code>GGally</code>). In this plot, you can visually identify noise data points and ouliers (points that are far from the majority of other points).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(iris, <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>See if you can spot the one red dot that is far away from all others.</p>
<p>We need complete data for many data mining methods. To remove missing values (<code>NA</code>) and
duplicates (identical data points which might be a mistake in the data), we often do this:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data.html#cb24-1" aria-hidden="true" tabindex="-1"></a>clean.data <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb24-2"><a href="data.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(clean.data)</span></code></pre></div>
<pre><code>##   Sepal.Length   Sepal.Width    Petal.Length 
##  Min.   :4.30   Min.   :2.00   Min.   :1.00  
##  1st Qu.:5.10   1st Qu.:2.80   1st Qu.:1.60  
##  Median :5.80   Median :3.00   Median :4.30  
##  Mean   :5.84   Mean   :3.06   Mean   :3.75  
##  3rd Qu.:6.40   3rd Qu.:3.30   3rd Qu.:5.10  
##  Max.   :7.90   Max.   :4.40   Max.   :6.90  
##   Petal.Width        Species  
##  Min.   :0.1   setosa    :50  
##  1st Qu.:0.3   versicolor:50  
##  Median :1.3   virginica :49  
##  Mean   :1.2                  
##  3rd Qu.:1.8                  
##  Max.   :2.5</code></pre>
<p>Note that one case (non-unique) is gone leaving only 149 flowers. The data did not contain missing values, but if it did, they would also have been dropped.
Typically, you should spend more time on data cleaning.</p>
</div>
<div id="aggregation" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Aggregation</h2>
<p>Data often contains groups and we want to compare these groups.
We group the iris dataset by species and then calculate a summary statistic for each group.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data.html#cb26-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   Species    Sepal.Length Sepal.Width Petal.Length
##   &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1 setosa             5.01        3.43         1.46
## 2 versicolor         5.94        2.77         4.26
## 3 virginica          6.59        2.97         5.55
## # … with 1 more variable: Petal.Width &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data.html#cb28-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(median)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   Species    Sepal.Length Sepal.Width Petal.Length
##   &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1 setosa              5           3.4         1.5 
## 2 versicolor          5.9         2.8         4.35
## 3 virginica           6.5         3           5.55
## # … with 1 more variable: Petal.Width &lt;dbl&gt;</code></pre>
<p>Using this information, we can compare how features differ between groups.</p>
</div>
<div id="sampling" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Sampling</h2>
<p><a href="https://en.wikipedia.org/wiki/Sampling_(statistics)">Sampling</a> is often used in data mining to reduce the dataset size.</p>
<div id="random-sampling" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Random Sampling</h3>
<p>The built-in sample function can sample from a vector with replacement.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot;</code></pre>
<p>We often want to sample rows from a dataset. This can be done by sampling without replacement from a vector with row indices (using the functions <code>seq</code> and <code>nrow</code>). The sample is vector is then used to subset the rows of the dataset.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data.html#cb32-1" aria-hidden="true" tabindex="-1"></a>take <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="fu">nrow</span>(iris)), <span class="at">size =</span> <span class="dv">15</span>)</span>
<span id="cb32-2"><a href="data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>take</span></code></pre></div>
<pre><code>##  [1]  66   8  17  47 135  87 103  12 145  43  54  27
## [13]  22 109 146</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>iris[take, ]</span></code></pre></div>
<pre><code>## # A tibble: 15 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1          6.7         3.1          4.4         1.4
##  2          5           3.4          1.5         0.2
##  3          5.4         3.9          1.3         0.4
##  4          5.1         3.8          1.6         0.2
##  5          6.1         2.6          5.6         1.4
##  6          6.7         3.1          4.7         1.5
##  7          7.1         3            5.9         2.1
##  8          4.8         3.4          1.6         0.2
##  9          6.7         3.3          5.7         2.5
## 10          4.4         3.2          1.3         0.2
## 11          5.5         2.3          4           1.3
## 12          5           3.4          1.6         0.4
## 13          5.1         3.7          1.5         0.4
## 14          6.7         2.5          5.8         1.8
## 15          6.7         3            5.2         2.3
## # … with 1 more variable: Species &lt;fct&gt;</code></pre>
<p><code>dplyr</code> from tidyverse lets us sample rows from tibbles directly. I set the random number generator seed to make the results reproducible.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1000</span>)</span>
<span id="cb36-2"><a href="data.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="data.html#cb36-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb36-4"><a href="data.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(s, <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="stratified-sampling" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Stratified Sampling</h3>
<p><a href="https://en.wikipedia.org/wiki/Stratified_sampling">Stratified sampling</a>
is a method of sampling from a population which can be partitioned into subpopulations,
while controlling the proportions of the subpopulation in the resulting sample.</p>
<p>In the following, the subpopulations are the different types of species and we want
to make sure to sample the same number (5) flowers from each. The library <code>sampling</code>
provides a function for stratified sampling. The column <code>ID_unit</code> in the resulting data.frame
contains the row numbers of the sampled rows. We can use <code>slice</code> from <code>dplyr</code> to select the
sampled rows.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sampling)</span>
<span id="cb38-2"><a href="data.html#cb38-2" aria-hidden="true" tabindex="-1"></a>id2 <span class="ot">&lt;-</span> <span class="fu">strata</span>(iris, <span class="at">stratanames =</span> <span class="st">&quot;Species&quot;</span>, <span class="at">size =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>), <span class="at">method =</span> <span class="st">&quot;srswor&quot;</span>)</span>
<span id="cb38-3"><a href="data.html#cb38-3" aria-hidden="true" tabindex="-1"></a>id2</span></code></pre></div>
<pre><code>##        Species ID_unit Prob Stratum
## 7       setosa       7  0.1       1
## 9       setosa       9  0.1       1
## 10      setosa      10  0.1       1
## 24      setosa      24  0.1       1
## 48      setosa      48  0.1       1
## 58  versicolor      58  0.1       2
## 62  versicolor      62  0.1       2
## 74  versicolor      74  0.1       2
## 78  versicolor      78  0.1       2
## 99  versicolor      99  0.1       2
## 106  virginica     106  0.1       3
## 107  virginica     107  0.1       3
## 127  virginica     127  0.1       3
## 135  virginica     135  0.1       3
## 145  virginica     145  0.1       3</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data.html#cb40-1" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">slice</span>(id2<span class="sc">$</span>ID_unit)</span>
<span id="cb40-2"><a href="data.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(s2, <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
</div>
<div id="features" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Features</h2>
<div id="dimensionality-reduction" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Dimensionality Reduction</h3>
<div id="principal-components-analysis-pca" class="section level4" number="2.5.1.1">
<h4><span class="header-section-number">2.5.1.1</span> Principal Components Analysis (PCA)</h4>
<p><a href="https://en.wikipedia.org/wiki/Principal_component_analysis">PCA</a> calculates principal components (a new orthonormal basis vectors in the data space) from data points such that the first principal component explains the most variability in the data, the second the next most and so on.
In data analysis, PCA is used to project high-dimensional data points onto the first few (typically two) principal components for visualization as a scatter plot and as preprocessing for modeling (e.g., before k-means clustering).
Points that are closer together in the high-dimensional space, tend also be closer together in the lower-dimensional space,</p>
<p>Look at the 3d data using an interactive 3d plot (needs package plotly). However, 3d plots are hard to print out and the iris data is actually in 4 dimensions.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">##library(plotly) # I don&#39;t load the package because it&#39;s namespace clashes with select in dplyr.</span></span>
<span id="cb42-2"><a href="data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">plot_ly</span>(iris, <span class="at">x =</span> <span class="sc">~</span>Sepal.Length, <span class="at">y =</span> <span class="sc">~</span>Petal.Length, <span class="at">z =</span> <span class="sc">~</span>Sepal.Width,</span>
<span id="cb42-3"><a href="data.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="sc">~</span>Petal.Width, <span class="at">color =</span> <span class="sc">~</span>Species, <span class="at">type=</span><span class="st">&quot;scatter3d&quot;</span>)</span></code></pre></div>
<pre><code>## No scatter3d mode specifed:
##   Setting the mode to markers
##   Read more about this attribute -&gt; https://plotly.com/r/reference/#scatter-mode</code></pre>
<pre><code>## Warning: `line.width` does not currently support
## multiple values.

## Warning: `line.width` does not currently support
## multiple values.

## Warning: `line.width` does not currently support
## multiple values.</code></pre>
<div id="htmlwidget-1545c60f9b87a294716c" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1545c60f9b87a294716c">{"x":{"visdat":{"3fcf338ab3f7b":["function () ","plotlyVisDat"]},"cur_data":"3fcf338ab3f7b","attrs":{"3fcf338ab3f7b":{"x":{},"y":{},"z":{},"color":{},"size":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Sepal.Length"},"yaxis":{"title":"Petal.Length"},"zaxis":{"title":"Sepal.Width"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5],"y":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4],"z":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3],"type":"scatter3d","mode":"markers","name":"setosa","marker":{"color":"rgba(102,194,165,1)","size":[13.75,13.75,13.75,13.75,13.75,21.25,17.5,13.75,13.75,10,13.75,13.75,10,10,13.75,21.25,21.25,17.5,17.5,17.5,13.75,21.25,13.75,25,13.75,13.75,21.25,13.75,13.75,13.75,13.75,21.25,10,13.75,13.75,13.75,13.75,10,13.75,13.75,17.5,17.5,13.75,28.75,21.25,17.5,13.75,13.75,13.75,13.75],"sizemode":"area","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)","size":[13.75,13.75,13.75,13.75,13.75,21.25,17.5,13.75,13.75,10,13.75,13.75,10,10,13.75,21.25,21.25,17.5,17.5,17.5,13.75,21.25,13.75,25,13.75,13.75,21.25,13.75,13.75,13.75,13.75,21.25,10,13.75,13.75,13.75,13.75,10,13.75,13.75,17.5,17.5,13.75,28.75,21.25,17.5,13.75,13.75,13.75,13.75]},"error_y":{"color":"rgba(102,194,165,1)","width":[]},"error_x":{"color":"rgba(102,194,165,1)","width":[]},"line":{"color":"rgba(102,194,165,1)"},"frame":null},{"x":[7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7],"y":[4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1],"z":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8],"type":"scatter3d","mode":"markers","name":"versicolor","marker":{"color":"rgba(252,141,98,1)","size":[58.75,62.5,62.5,55,62.5,55,66.25,43.75,55,58.75,43.75,62.5,43.75,58.75,55,58.75,62.5,43.75,62.5,47.5,73.75,55,62.5,51.25,55,58.75,58.75,70,62.5,43.75,47.5,43.75,51.25,66.25,62.5,66.25,62.5,55,55,55,51.25,58.75,51.25,43.75,55,51.25,55,55,47.5,55],"sizemode":"area","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)","size":[58.75,62.5,62.5,55,62.5,55,66.25,43.75,55,58.75,43.75,62.5,43.75,58.75,55,58.75,62.5,43.75,62.5,47.5,73.75,55,62.5,51.25,55,58.75,58.75,70,62.5,43.75,47.5,43.75,51.25,66.25,62.5,66.25,62.5,55,55,55,51.25,58.75,51.25,43.75,55,51.25,55,55,47.5,55]},"error_y":{"color":"rgba(252,141,98,1)","width":[]},"error_x":{"color":"rgba(252,141,98,1)","width":[]},"line":{"color":"rgba(252,141,98,1)"},"frame":null},{"x":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"y":[6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"z":[3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"type":"scatter3d","mode":"markers","name":"virginica","marker":{"color":"rgba(141,160,203,1)","size":[100,77.5,85,73.75,88.75,85,70,73.75,73.75,100,81.25,77.5,85,81.25,96.25,92.5,73.75,88.75,92.5,62.5,92.5,81.25,81.25,73.75,85,73.75,73.75,73.75,85,66.25,77.5,81.25,88.75,62.5,58.75,92.5,96.25,73.75,73.75,85,96.25,92.5,77.5,92.5,100,92.5,77.5,81.25,92.5,73.75],"sizemode":"area","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)","size":[100,77.5,85,73.75,88.75,85,70,73.75,73.75,100,81.25,77.5,85,81.25,96.25,92.5,73.75,88.75,92.5,62.5,92.5,81.25,81.25,73.75,85,73.75,73.75,73.75,85,66.25,77.5,81.25,88.75,62.5,58.75,92.5,96.25,73.75,73.75,85,96.25,92.5,77.5,92.5,100,92.5,77.5,81.25,92.5,73.75]},"error_y":{"color":"rgba(141,160,203,1)","width":[]},"error_x":{"color":"rgba(141,160,203,1)","width":[]},"line":{"color":"rgba(141,160,203,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The principal components can be calculated from a matrix using the function <code>prcomp()</code>. We select
all numeric columns (by removing the species column) and convert the data.frame into a matrix before
the calculation.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data.html#cb45-1" aria-hidden="true" tabindex="-1"></a>pc <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>() <span class="sc">%&gt;%</span> <span class="fu">prcomp</span>()</span>
<span id="cb45-2"><a href="data.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pc)</span></code></pre></div>
<pre><code>## Importance of components:
##                          PC1    PC2    PC3     PC4
## Standard deviation     2.056 0.4926 0.2797 0.15439
## Proportion of Variance 0.925 0.0531 0.0171 0.00521
## Cumulative Proportion  0.925 0.9777 0.9948 1.00000</code></pre>
<p>How important is each principal component can also be seen using a <a href="https://en.wikipedia.org/wiki/Scree_plot">scree plot</a>. The plot function for the result of
the <code>prcomp</code> function visualizes how much variability in the data is explained by each additional principal component.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pc, <span class="at">type =</span> <span class="st">&quot;line&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Note that the first principal component (PC1) explains most of the variability in the iris dataset.</p>
<p>To find out what information is stored in the object <code>pc</code>, we can inspect the
raw object (display <em>str</em>ucture).</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pc)</span></code></pre></div>
<pre><code>## List of 5
##  $ sdev    : num [1:4] 2.056 0.493 0.28 0.154
##  $ rotation: num [1:4, 1:4] 0.3614 -0.0845 0.8567 0.3583 -0.6566 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:4] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot; &quot;Petal.Length&quot; &quot;Petal.Width&quot;
##   .. ..$ : chr [1:4] &quot;PC1&quot; &quot;PC2&quot; &quot;PC3&quot; &quot;PC4&quot;
##  $ center  : Named num [1:4] 5.84 3.06 3.76 1.2
##   ..- attr(*, &quot;names&quot;)= chr [1:4] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot; &quot;Petal.Length&quot; &quot;Petal.Width&quot;
##  $ scale   : logi FALSE
##  $ x       : num [1:150, 1:4] -2.68 -2.71 -2.89 -2.75 -2.73 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : NULL
##   .. ..$ : chr [1:4] &quot;PC1&quot; &quot;PC2&quot; &quot;PC3&quot; &quot;PC4&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;prcomp&quot;</code></pre>
<p>The element <code>x</code> contains the data points projected on the principal components.
We can convert the matrix into a tibble and add the species column from the original
dataset to display the data projected on the first two principal components.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data.html#cb50-1" aria-hidden="true" tabindex="-1"></a>iris_projected <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(pc<span class="sc">$</span>x) <span class="sc">%&gt;%</span> <span class="fu">add_column</span>(<span class="at">Species =</span> iris<span class="sc">$</span>Species)</span>
<span id="cb50-2"><a href="data.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris_projected, <span class="fu">aes</span>(<span class="at">x =</span> PC1, <span class="at">y =</span> PC2, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb50-3"><a href="data.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Since the first principal component represents most of the variability, we can
also show the data projected only on PC1.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris_projected, </span>
<span id="cb51-2"><a href="data.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> PC1, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb51-3"><a href="data.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-4"><a href="data.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb51-5"><a href="data.html#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb51-6"><a href="data.html#cb51-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb51-7"><a href="data.html#cb51-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>A plot of the projected data with the original axes added as arrows is called a
<a href="https://en.wikipedia.org/wiki/Biplot">biplot</a>. If the arrows (original axes)
align roughly with the axes of the projection, then they are correlated (linearly dependent).</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span></code></pre></div>
<pre><code>## Welcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca</span>(pc)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>We can also display only the old and new axes.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_var</span>(pc)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>We see Petal.Width and Petal.Length point in the same direction which indicates that they are highly correlated. They are also roughly aligned with PC1 (called Dim1 in the plot) which means that PC1 represents most of the variability of these two variables. Sepal.Width parallel to the y-axis and therefore represented by PC2 (Dim2). Petal.Width/Petal.Length and Sepal.Width are almost at 90 degrees, indicating that they are close to uncorrelated. Sepal.Length correlated to all other variables and
represented by both, PC1 and PC2 in the projection.</p>
<p>Another popular method to project data into lower dimensions for visualization is <strong>t-distributed stochastic neighbor embedding (t-SNE)</strong> available in package <code>Rtsne</code>.</p>
</div>
<div id="multi-dimensional-scaling-mds" class="section level4" number="2.5.1.2">
<h4><span class="header-section-number">2.5.1.2</span> Multi-Dimensional Scaling (MDS)</h4>
<p><a href="https://en.wikipedia.org/wiki/Multidimensional_scaling">MDS</a> is similar to PCA. Instead of data points, it takes pairwise distances (i.e., a distance matrix) and produces a space where points are placed to represent these distances as well as possible. The axis in this space are called components and are similar to the principal components in PCA.</p>
<p>First, we calculate a distance matrix from the 4-d space of the iris dataset.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data.html#cb56-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">dist</span>()</span></code></pre></div>
<p>Metric (classic) MDS tries to reconstruct a 2-d space from the distance matrix. Points with smaller distances are closer in the reconstructed space.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data.html#cb57-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">cmdscale</span>(d, <span class="at">k =</span> <span class="dv">2</span>)</span>
<span id="cb57-2"><a href="data.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(fit) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;comp1&quot;</span>, <span class="st">&quot;comp2&quot;</span>)</span>
<span id="cb57-3"><a href="data.html#cb57-3" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(fit) <span class="sc">%&gt;%</span> <span class="fu">add_column</span>(<span class="at">Species =</span> iris<span class="sc">$</span>Species)</span>
<span id="cb57-4"><a href="data.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="data.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(fit, <span class="fu">aes</span>(<span class="at">x =</span> comp1, <span class="at">y =</span> comp2, <span class="at">color =</span> Species)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="672" />
The resulting projection is similar (except for rotation and reflection) to the result of PCA.</p>
</div>
<div id="non-parametric-multidimensional-scaling" class="section level4" number="2.5.1.3">
<h4><span class="header-section-number">2.5.1.3</span> Non-Parametric Multidimensional Scaling</h4>
<p>Non-parametric multidimensional scaling performs MDS while relaxing the need of linear relationships. Methods are available in package <code>MASS</code> as functions
<code>isoMDS</code> and <code>sammon</code>.</p>
</div>
</div>
<div id="feature-selection" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Feature Selection</h3>
<p>Feature selection is the process of identifying the features that are used to create a model.
We will talk about feature selection when we discuss classification models in Chapter 3 in <a href="classification-basic-concepts-and-techniques.html#feature-selection-and-feature-preparation">Feature Selection and Feature Preparation</a>.</p>
</div>
<div id="discretize-features" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Discretize Features</h3>
<p>Some data mining methods require discrete data.
Discretization converts continuous features into discrete features.</p>
<p>Petal.Width is a continuous feature. Before we perform discretization, we should look at the
distribution and see if it gives us an idea how we should group the continuous values into
a set of discrete values. A histogram visualizes the distribution of a single
continuous feature.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Petal.Width)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>The R function <code>cut</code> performs equal interval width discretization.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data.html#cb59-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">cut</span>(<span class="at">breaks =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   [1] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6]
##   [6] (3.6,4.4] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6]
##  [11] (3.6,4.4] (2.8,3.6] (2.8,3.6] (2.8,3.6] (3.6,4.4]
##  [16] (3.6,4.4] (3.6,4.4] (2.8,3.6] (3.6,4.4] (3.6,4.4]
##  [21] (2.8,3.6] (3.6,4.4] (2.8,3.6] (2.8,3.6] (2.8,3.6]
##  [26] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6]
##  [31] (2.8,3.6] (2.8,3.6] (3.6,4.4] (3.6,4.4] (2.8,3.6]
##  [36] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6]
##  [41] (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6] (3.6,4.4]
##  [46] (2.8,3.6] (3.6,4.4] (2.8,3.6] (3.6,4.4] (2.8,3.6]
##  [51] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2,2.8]   (2,2.8]  
##  [56] (2,2.8]   (2.8,3.6] (2,2.8]   (2.8,3.6] (2,2.8]  
##  [61] (2,2.8]   (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6]
##  [66] (2.8,3.6] (2.8,3.6] (2,2.8]   (2,2.8]   (2,2.8]  
##  [71] (2.8,3.6] (2,2.8]   (2,2.8]   (2,2.8]   (2.8,3.6]
##  [76] (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6] (2,2.8]  
##  [81] (2,2.8]   (2,2.8]   (2,2.8]   (2,2.8]   (2.8,3.6]
##  [86] (2.8,3.6] (2.8,3.6] (2,2.8]   (2.8,3.6] (2,2.8]  
##  [91] (2,2.8]   (2.8,3.6] (2,2.8]   (2,2.8]   (2,2.8]  
##  [96] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2,2.8]   (2,2.8]  
## [101] (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6] (2.8,3.6]
## [106] (2.8,3.6] (2,2.8]   (2.8,3.6] (2,2.8]   (2.8,3.6]
## [111] (2.8,3.6] (2,2.8]   (2.8,3.6] (2,2.8]   (2,2.8]  
## [116] (2.8,3.6] (2.8,3.6] (3.6,4.4] (2,2.8]   (2,2.8]  
## [121] (2.8,3.6] (2,2.8]   (2,2.8]   (2,2.8]   (2.8,3.6]
## [126] (2.8,3.6] (2,2.8]   (2.8,3.6] (2,2.8]   (2.8,3.6]
## [131] (2,2.8]   (3.6,4.4] (2,2.8]   (2,2.8]   (2,2.8]  
## [136] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6] (2.8,3.6]
## [141] (2.8,3.6] (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6]
## [146] (2.8,3.6] (2,2.8]   (2.8,3.6] (2.8,3.6] (2.8,3.6]
## Levels: (2,2.8] (2.8,3.6] (3.6,4.4]</code></pre>
<p>Other discretization methods include equal frequency discretization using k-means clustering.
These methods are implemented by several R packages. We use here the implementation in package
<code>arules</code> and visualize the results as histograms with blue lines to separate intervals assigned to
each discrete value.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span></code></pre></div>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;Matrix&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:tidyr&#39;:
## 
##     expand, pack, unpack</code></pre>
<pre><code>## 
## Attaching package: &#39;arules&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     recode</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     abbreviate, write</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data.html#cb68-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;interval&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   [1] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##   [6] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [11] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [16] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [21] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [26] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [31] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [36] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [41] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [46] [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9) [0.1,0.9)
##  [51] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [56] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [61] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [66] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [71] [1.7,2.5] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [76] [0.9,1.7) [0.9,1.7) [1.7,2.5] [0.9,1.7) [0.9,1.7)
##  [81] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [86] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [91] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
##  [96] [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7) [0.9,1.7)
## [101] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [106] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [111] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [116] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [0.9,1.7)
## [121] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [126] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [0.9,1.7)
## [131] [1.7,2.5] [1.7,2.5] [1.7,2.5] [0.9,1.7) [0.9,1.7)
## [136] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [141] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## [146] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5] [1.7,2.5]
## attr(,&quot;discretized:breaks&quot;)
## [1] 0.1 0.9 1.7 2.5
## attr(,&quot;discretized:method&quot;)
## [1] interval
## Levels: [0.1,0.9) [0.9,1.7) [1.7,2.5]</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data.html#cb70-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;frequency&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   [1] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##   [5] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##   [9] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [13] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [17] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [21] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [25] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [29] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [33] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [37] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [41] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [45] [0.1,0.867) [0.1,0.867) [0.1,0.867) [0.1,0.867)
##  [49] [0.1,0.867) [0.1,0.867) [0.867,1.6) [0.867,1.6)
##  [53] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [57] [1.6,2.5]   [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [61] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [65] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [69] [0.867,1.6) [0.867,1.6) [1.6,2.5]   [0.867,1.6)
##  [73] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [77] [0.867,1.6) [1.6,2.5]   [0.867,1.6) [0.867,1.6)
##  [81] [0.867,1.6) [0.867,1.6) [0.867,1.6) [1.6,2.5]  
##  [85] [0.867,1.6) [1.6,2.5]   [0.867,1.6) [0.867,1.6)
##  [89] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [93] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
##  [97] [0.867,1.6) [0.867,1.6) [0.867,1.6) [0.867,1.6)
## [101] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [105] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [109] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [113] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [117] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [0.867,1.6)
## [121] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [125] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [129] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [133] [1.6,2.5]   [0.867,1.6) [0.867,1.6) [1.6,2.5]  
## [137] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [141] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [145] [1.6,2.5]   [1.6,2.5]   [1.6,2.5]   [1.6,2.5]  
## [149] [1.6,2.5]   [1.6,2.5]  
## attr(,&quot;discretized:breaks&quot;)
## [1] 0.100 0.867 1.600 2.500
## attr(,&quot;discretized:method&quot;)
## [1] frequency
## Levels: [0.1,0.867) [0.867,1.6) [1.6,2.5]</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data.html#cb72-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;cluster&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   [1] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##   [4] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##   [7] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [10] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [13] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [16] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [19] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [22] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [25] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [28] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [31] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [34] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [37] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [40] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [43] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [46] [0.1,0.792)  [0.1,0.792)  [0.1,0.792) 
##  [49] [0.1,0.792)  [0.1,0.792)  [0.792,1.71)
##  [52] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [55] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [58] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [61] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [64] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [67] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [70] [0.792,1.71) [1.71,2.5]   [0.792,1.71)
##  [73] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [76] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [79] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [82] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [85] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [88] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [91] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [94] [0.792,1.71) [0.792,1.71) [0.792,1.71)
##  [97] [0.792,1.71) [0.792,1.71) [0.792,1.71)
## [100] [0.792,1.71) [1.71,2.5]   [1.71,2.5]  
## [103] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [106] [1.71,2.5]   [0.792,1.71) [1.71,2.5]  
## [109] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [112] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [115] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [118] [1.71,2.5]   [1.71,2.5]   [0.792,1.71)
## [121] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [124] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [127] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [130] [0.792,1.71) [1.71,2.5]   [1.71,2.5]  
## [133] [1.71,2.5]   [0.792,1.71) [0.792,1.71)
## [136] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [139] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [142] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [145] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## [148] [1.71,2.5]   [1.71,2.5]   [1.71,2.5]  
## attr(,&quot;discretized:breaks&quot;)
## [1] 0.100 0.792 1.705 2.500
## attr(,&quot;discretized:method&quot;)
## [1] cluster
## Levels: [0.1,0.792) [0.792,1.71) [1.71,2.5]</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Width)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb74-2"><a href="data.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span></span>
<span id="cb74-3"><a href="data.html#cb74-3" aria-hidden="true" tabindex="-1"></a>      iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;interval&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">onlycuts =</span> <span class="cn">TRUE</span>),</span>
<span id="cb74-4"><a href="data.html#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb74-5"><a href="data.html#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Discretization: interval&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Blue lines are boundaries&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Width)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb75-2"><a href="data.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span></span>
<span id="cb75-3"><a href="data.html#cb75-3" aria-hidden="true" tabindex="-1"></a>      iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;frequency&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">onlycuts =</span> <span class="cn">TRUE</span>),</span>
<span id="cb75-4"><a href="data.html#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb75-5"><a href="data.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Discretization: frequency&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Blue lines are boundaries&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-2.png" width="672" /></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Width)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb76-2"><a href="data.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span></span>
<span id="cb76-3"><a href="data.html#cb76-3" aria-hidden="true" tabindex="-1"></a>      iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Width) <span class="sc">%&gt;%</span> <span class="fu">discretize</span>(<span class="at">method =</span> <span class="st">&quot;cluster&quot;</span>, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">onlycuts =</span> <span class="cn">TRUE</span>),</span>
<span id="cb76-4"><a href="data.html#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-5"><a href="data.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Discretization: cluster&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Blue lines are boundaries&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-3.png" width="672" /></p>
</div>
<div id="standardize-data" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Standardize Data</h3>
<p>Standardizing (scaling, normalizing) the range of features values to make them comparable.
The most popular method is to convert the values of each feature to <a href="https://en.wikipedia.org/wiki/Standard_score">z-scores</a>.
by subtracting the mean (centering) and dividing by the
standard deviation (scaling).</p>
<p><em>Note:</em> tidyverse currently does not have a simple scale function,
so I make one that provides a wrapper for the standard scale function in R:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data.html#cb77-1" aria-hidden="true" tabindex="-1"></a>scale_numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.numeric, <span class="cf">function</span>(y) <span class="fu">as.vector</span>(<span class="fu">scale</span>(y)))</span>
<span id="cb77-2"><a href="data.html#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="data.html#cb77-3" aria-hidden="true" tabindex="-1"></a>iris.scaled <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">scale_numeric</span>()</span>
<span id="cb77-4"><a href="data.html#cb77-4" aria-hidden="true" tabindex="-1"></a>iris.scaled</span></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1       -0.898      1.02          -1.34       -1.31
##  2       -1.14      -0.132         -1.34       -1.31
##  3       -1.38       0.327         -1.39       -1.31
##  4       -1.50       0.0979        -1.28       -1.31
##  5       -1.02       1.25          -1.34       -1.31
##  6       -0.535      1.93          -1.17       -1.05
##  7       -1.50       0.786         -1.34       -1.18
##  8       -1.02       0.786         -1.28       -1.31
##  9       -1.74      -0.361         -1.34       -1.31
## 10       -1.14       0.0979        -1.28       -1.44
## # … with 140 more rows, and 1 more variable:
## #   Species &lt;fct&gt;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris.scaled)</span></code></pre></div>
<pre><code>##   Sepal.Length     Sepal.Width      Petal.Length   
##  Min.   :-1.864   Min.   :-2.426   Min.   :-1.562  
##  1st Qu.:-0.898   1st Qu.:-0.590   1st Qu.:-1.222  
##  Median :-0.052   Median :-0.132   Median : 0.335  
##  Mean   : 0.000   Mean   : 0.000   Mean   : 0.000  
##  3rd Qu.: 0.672   3rd Qu.: 0.557   3rd Qu.: 0.760  
##  Max.   : 2.484   Max.   : 3.080   Max.   : 1.780  
##   Petal.Width           Species  
##  Min.   :-1.442   setosa    :50  
##  1st Qu.:-1.180   versicolor:50  
##  Median : 0.132   virginica :50  
##  Mean   : 0.000                  
##  3rd Qu.: 0.788                  
##  Max.   : 1.706</code></pre>
<p>The standardized feature has a mean of zero and is measured in standard deviations away from zero.
Most “normal” values will fall in the range [-3,3] (standard deviations).</p>
</div>
</div>
<div id="proximities-similarities-and-distances" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Proximities: Similarities and Distances</h2>
<p>R stores proximity as dissimilarities/distances matrices. Similarities are first converted to dissimilarities.
Distances are symmetric, i.e., the distance
from A to B is the same as the distance from B to A. R therefore stores only a triangle (typically the lower triangle) of the distance matrix.</p>
<div id="minkowsky-distances" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Minkowsky Distances</h3>
<p>The <a href="https://en.wikipedia.org/wiki/Minkowski_distance">Minkowsky distance</a> is a family of
metric distances including Euclidean and Manhattan distance. To avoid one feature to dominate the
distance calculation, scaled data is typically used.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data.html#cb81-1" aria-hidden="true" tabindex="-1"></a>iris_sample <span class="ot">&lt;-</span> iris.scaled <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb81-2"><a href="data.html#cb81-2" aria-hidden="true" tabindex="-1"></a>iris_sample</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1       -0.898      1.02          -1.34       -1.31
## 2       -1.14      -0.132         -1.34       -1.31
## 3       -1.38       0.327         -1.39       -1.31
## 4       -1.50       0.0979        -1.28       -1.31
## 5       -1.02       1.25          -1.34       -1.31</code></pre>
<p>Calculate distances matrices between the first 5 flowers.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(iris_sample, <span class="at">method=</span><span class="st">&quot;euclidean&quot;</span>)</span></code></pre></div>
<pre><code>##       1     2     3     4
## 2 1.172                  
## 3 0.843 0.522            
## 4 1.100 0.433 0.283      
## 5 0.259 1.382 0.988 1.246</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(iris_sample, <span class="at">method=</span><span class="st">&quot;manhattan&quot;</span>)</span></code></pre></div>
<pre><code>##       1     2     3     4
## 2 1.389                  
## 3 1.228 0.757            
## 4 1.578 0.648 0.463      
## 5 0.350 1.497 1.337 1.687</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(iris_sample, <span class="at">method=</span><span class="st">&quot;maximum&quot;</span>)</span></code></pre></div>
<pre><code>##       1     2     3     4
## 2 1.147                  
## 3 0.688 0.459            
## 4 0.918 0.362 0.229      
## 5 0.229 1.377 0.918 1.147</code></pre>
<p>We see that only the lower triangle of the distance matrices are stored (note that rows start with row 2).</p>
</div>
<div id="distances-for-binary-data" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Distances for Binary Data</h3>
<p>Binary data can be encodes as <code>0</code> and <code>1</code> (numeric) or <code>TRUE</code> and <code>FALSE</code> (logical).</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data.html#cb89-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb89-2"><a href="data.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb89-3"><a href="data.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb89-4"><a href="data.html#cb89-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb89-5"><a href="data.html#cb89-5" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
## [1,]    0    0    0    1    1    1    1    0    0
## [2,]    0    0    1    1    1    0    0    1    0
##      [,10]
## [1,]     1
## [2,]     0</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data.html#cb91-1" aria-hidden="true" tabindex="-1"></a>b_logical <span class="ot">&lt;-</span> <span class="fu">apply</span>(b, <span class="at">MARGIN =</span> <span class="dv">2</span>, as.logical)</span>
<span id="cb91-2"><a href="data.html#cb91-2" aria-hidden="true" tabindex="-1"></a>b_logical</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3] [,4] [,5]  [,6]  [,7]  [,8]
## [1,] FALSE FALSE FALSE TRUE TRUE  TRUE  TRUE FALSE
## [2,] FALSE FALSE  TRUE TRUE TRUE FALSE FALSE  TRUE
##       [,9] [,10]
## [1,] FALSE  TRUE
## [2,] FALSE FALSE</code></pre>
<div id="hamming-distance" class="section level4" number="2.6.2.1">
<h4><span class="header-section-number">2.6.2.1</span> Hamming Distance</h4>
<p>The <a href="https://en.wikipedia.org/wiki/Hamming_distance">Hamming distance</a> is the number of mis-matches
between two binary vectors. For 0-1 data this is equivalent to the
Manhattan distance and also the squared Euclidean distance.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(b, <span class="at">method =</span> <span class="st">&quot;manhattan&quot;</span>)</span></code></pre></div>
<pre><code>##   1
## 2 5</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(b, <span class="at">method =</span> <span class="st">&quot;euclidean&quot;</span>)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>##   1
## 2 5</code></pre>
</div>
<div id="jaccard-index" class="section level4" number="2.6.2.2">
<h4><span class="header-section-number">2.6.2.2</span> Jaccard Index</h4>
<p>The <a href="https://en.wikipedia.org/wiki/Jaccard_index">Jaccard index</a> is a similarity measure that focuses on matching 1s. R converts the similarity into a dissimilarity using <span class="math inline">\(d_{J} = 1 - s_{J}\)</span>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dist</span>(b, <span class="at">method =</span> <span class="st">&quot;binary&quot;</span>)</span></code></pre></div>
<pre><code>##       1
## 2 0.714</code></pre>
</div>
</div>
<div id="distances-for-mixed-data" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Distances for Mixed Data</h3>
<p>Most distance measures work only on numeric data. Often we have a mixture of
numbers and nominal features like this data:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data.html#cb99-1" aria-hidden="true" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb99-2"><a href="data.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="fu">c</span>(      <span class="dv">160</span>,    <span class="dv">185</span>,    <span class="dv">170</span>),</span>
<span id="cb99-3"><a href="data.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fu">c</span>(       <span class="dv">52</span>,     <span class="dv">90</span>,     <span class="dv">75</span>),</span>
<span id="cb99-4"><a href="data.html#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex    =</span> <span class="fu">c</span>( <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;male&quot;</span>)</span>
<span id="cb99-5"><a href="data.html#cb99-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb99-6"><a href="data.html#cb99-6" aria-hidden="true" tabindex="-1"></a>people</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   height weight sex   
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
## 1    160     52 female
## 2    185     90 male  
## 3    170     75 male</code></pre>
<p><strong>Note:</strong> Nominal features need to be a factor and not character (<code>&lt;chr&gt;</code>).</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data.html#cb101-1" aria-hidden="true" tabindex="-1"></a>people <span class="ot">&lt;-</span> people <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character, factor)</span>
<span id="cb101-2"><a href="data.html#cb101-2" aria-hidden="true" tabindex="-1"></a>people</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   height weight sex   
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; 
## 1    160     52 female
## 2    185     90 male  
## 3    170     75 male</code></pre>
<div id="gowers-coefficient" class="section level4" number="2.6.3.1">
<h4><span class="header-section-number">2.6.3.1</span> Gower’s Coefficient</h4>
<p>Gower’s coefficient of similarity works with mixed data by calculating the appropriate similarity
for each feature and then
aggregating them into a single measure. The package <code>proxy</code> implements
Gower’s coefficient converted into a distance.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(proxy)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;proxy&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     as.matrix</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     as.dist, dist</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     as.matrix</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data.html#cb108-1" aria-hidden="true" tabindex="-1"></a>d_Gower <span class="ot">&lt;-</span> <span class="fu">dist</span>(people, <span class="at">method =</span> <span class="st">&quot;Gower&quot;</span>)</span>
<span id="cb108-2"><a href="data.html#cb108-2" aria-hidden="true" tabindex="-1"></a>d_Gower</span></code></pre></div>
<pre><code>##       1     2
## 2 1.000      
## 3 0.668 0.332</code></pre>
<p>Gower’s coefficient calculation implicitly scales the data because it calculates distances on each feature individualy, so no need to scale
the data first.</p>
</div>
<div id="using-euclidean-distance-with-mixed-data" class="section level4" number="2.6.3.2">
<h4><span class="header-section-number">2.6.3.2</span> Using Euclidean Distance with Mixed Data</h4>
<p>Sometimes methods (e.g., k-means) can only use Euclidean distance. In this
case, nominal features can be converted into 0-1 dummy variables. After scaling, Euclidean
distance will result in a usable distance measure.</p>
<p>We use package <code>caret</code> to create dummy variables.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code></pre></div>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## 
## Attaching package: &#39;caret&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:sampling&#39;:
## 
##     cluster</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     lift</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data.html#cb115-1" aria-hidden="true" tabindex="-1"></a>data_dummy <span class="ot">&lt;-</span> <span class="fu">dummyVars</span>(<span class="sc">~</span>., people) <span class="sc">%&gt;%</span> <span class="fu">predict</span>(people)</span>
<span id="cb115-2"><a href="data.html#cb115-2" aria-hidden="true" tabindex="-1"></a>data_dummy</span></code></pre></div>
<pre><code>##   height weight sex.female sex.male
## 1    160     52          1        0
## 2    185     90          0        1
## 3    170     75          0        1</code></pre>
<p>Note that feature sex has now two columns. If we want to<br />
height, weight and sex to have the same influence on the distance measure, then we need
to weight the sex columns by 1/2 after scaling.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data.html#cb117-1" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>), <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(data_dummy), <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb117-2"><a href="data.html#cb117-2" aria-hidden="true" tabindex="-1"></a>data_dummy_scaled <span class="ot">&lt;-</span> <span class="fu">scale</span>(data_dummy) <span class="sc">*</span> weight</span>
<span id="cb117-3"><a href="data.html#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="data.html#cb117-4" aria-hidden="true" tabindex="-1"></a>d_dummy <span class="ot">&lt;-</span> <span class="fu">dist</span>(data_dummy_scaled)</span>
<span id="cb117-5"><a href="data.html#cb117-5" aria-hidden="true" tabindex="-1"></a>d_dummy</span></code></pre></div>
<pre><code>##      1    2
## 2 3.06     
## 3 1.89 1.43</code></pre>
<p>The distance using dummy variables is (mostly) consistent with Gower’s distance (other than that
Gower’s distance is scaled between 0 and 1).</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">tibble</span>(d_dummy, d_Gower), <span class="fu">aes</span>(<span class="at">x =</span> d_dummy, <span class="at">y =</span> d_Gower)) <span class="sc">+</span></span>
<span id="cb119-2"><a href="data.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb119-3"><a href="data.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type dist. Defaulting to continuous.
## Don&#39;t know how to automatically pick scale for object of type dist. Defaulting to continuous.</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
</div>
</div>
<div id="additional-proximity-measures-available-in-package-proxy" class="section level3" number="2.6.4">
<h3><span class="header-section-number">2.6.4</span> Additional proximity Measures Available in Package proxy</h3>
<p>The package <code>proxy</code> implements a wide array of distances.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(proxy)</span>
<span id="cb122-2"><a href="data.html#cb122-2" aria-hidden="true" tabindex="-1"></a>pr_DB<span class="sc">$</span><span class="fu">get_entry_names</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;Jaccard&quot;         &quot;Kulczynski1&quot;    
##  [3] &quot;Kulczynski2&quot;     &quot;Mountford&quot;      
##  [5] &quot;Fager&quot;           &quot;Russel&quot;         
##  [7] &quot;simple matching&quot; &quot;Hamman&quot;         
##  [9] &quot;Faith&quot;           &quot;Tanimoto&quot;       
## [11] &quot;Dice&quot;            &quot;Phi&quot;            
## [13] &quot;Stiles&quot;          &quot;Michael&quot;        
## [15] &quot;Mozley&quot;          &quot;Yule&quot;           
## [17] &quot;Yule2&quot;           &quot;Ochiai&quot;         
## [19] &quot;Simpson&quot;         &quot;Braun-Blanquet&quot; 
## [21] &quot;cosine&quot;          &quot;eJaccard&quot;       
## [23] &quot;eDice&quot;           &quot;correlation&quot;    
## [25] &quot;Chi-squared&quot;     &quot;Phi-squared&quot;    
## [27] &quot;Tschuprow&quot;       &quot;Cramer&quot;         
## [29] &quot;Pearson&quot;         &quot;Gower&quot;          
## [31] &quot;Euclidean&quot;       &quot;Mahalanobis&quot;    
## [33] &quot;Bhjattacharyya&quot;  &quot;Manhattan&quot;      
## [35] &quot;supremum&quot;        &quot;Minkowski&quot;      
## [37] &quot;Canberra&quot;        &quot;Wave&quot;           
## [39] &quot;divergence&quot;      &quot;Kullback&quot;       
## [41] &quot;Bray&quot;            &quot;Soergel&quot;        
## [43] &quot;Levenshtein&quot;     &quot;Podani&quot;         
## [45] &quot;Chord&quot;           &quot;Geodesic&quot;       
## [47] &quot;Whittaker&quot;       &quot;Hellinger&quot;      
## [49] &quot;fJaccard&quot;</code></pre>
<p>Note that loading the package <code>proxy</code> replaces the <code>dist</code> function in R.
You can specify which dist function to use by specifying the package in the call. For
example <code>stats::dist()</code> calls the default function in R (the package <code>stats</code> is part of R) while <code>proxy::dist()</code> calls the
version in the package <code>proxy</code>.</p>
</div>
</div>
<div id="relationships-between-features" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Relationships Between Features</h2>
<div id="correlation" class="section level3" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Correlation</h3>
<p>Correlation can be used for
ratio/interval scaled features.
We typically think of the <a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson correlation coefficient</a> between features (columns).</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data.html#cb124-1" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb124-2"><a href="data.html#cb124-2" aria-hidden="true" tabindex="-1"></a>cc</span></code></pre></div>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Length        1.000      -0.118        0.872
## Sepal.Width        -0.118       1.000       -0.428
## Petal.Length        0.872      -0.428        1.000
## Petal.Width         0.818      -0.366        0.963
##              Petal.Width
## Sepal.Length       0.818
## Sepal.Width       -0.366
## Petal.Length       0.963
## Petal.Width        1.000</code></pre>
<p><code>cor</code> calculates a correlation matrix with pairwise correlations between features.
The correlation between Petal.Length and Petal.Width can be visualized using a scatter plot.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Length, Petal.Width)) <span class="sc">+</span> </span>
<span id="cb126-2"><a href="data.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb126-3"><a href="data.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
<p><code>geom_smooth</code> adds a regression line by fitting a linear model (<code>lm</code>). Most points are close to this line indicating strong linear dependence (i.e., correlation).</p>
<p>We can calculate individual correlations by specifying two vectors.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(iris, <span class="fu">cor</span>(Petal.Length, Petal.Width))</span></code></pre></div>
<pre><code>## [1] 0.963</code></pre>
<p><em>Note:</em> <code>with</code> lets you use columns using just their names and
<code>with(iris, cor(Petal.Length, Petal.Width))</code>
is the same as <code>cor(iris$Petal.Length, iris$Petal.Width)</code>.</p>
<p>Finally, we can test if the correlation is significantly different from zero.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(iris, <span class="fu">cor.test</span>(Petal.Length, Petal.Width))</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  Petal.Length and Petal.Width
## t = 43, df = 148, p-value &lt;2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.949 0.973
## sample estimates:
##   cor 
## 0.963</code></pre>
<p>A small p-value (less than 0.05) indicates that the observed correlation is significantly different from zero. This can also be seen by the fact that the 95% confidence interval does not span zero.</p>
<p>Sepal.Length and Sepal.Width show little correlation:</p>
<p><code>{ r} ggplot(iris, aes(Sepal.Length, Sepal.Width)) + geom_point() +   geom_smooth(method = "lm") with(iris, cor(Sepal.Length, Sepal.Width)) with(iris, cor.test(Sepal.Length, Sepal.Width))</code></p>
</div>
<div id="rank-correlation" class="section level3" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Rank Correlation</h3>
<p>Rank correlation is used for ordinal features.
To show this, we first convert the continuous features in the Iris dataset into
ordered factors (ordinal) with three levels using the function <code>cut</code>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data.html#cb132-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.numeric,</span>
<span id="cb132-2"><a href="data.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">cut</span>(x, <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;short&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;long&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb132-3"><a href="data.html#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="data.html#cb132-4" aria-hidden="true" tabindex="-1"></a>iris_ord</span></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##    &lt;ord&gt;        &lt;ord&gt;       &lt;ord&gt;        &lt;ord&gt;      
##  1 short        medium      short        short      
##  2 short        medium      short        short      
##  3 short        medium      short        short      
##  4 short        medium      short        short      
##  5 short        medium      short        short      
##  6 short        long        short        short      
##  7 short        medium      short        short      
##  8 short        medium      short        short      
##  9 short        medium      short        short      
## 10 short        medium      short        short      
## # … with 140 more rows, and 1 more variable:
## #   Species &lt;fct&gt;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris_ord)</span></code></pre></div>
<pre><code>##  Sepal.Length Sepal.Width Petal.Length Petal.Width
##  short :59    short :47   short :50    short :50  
##  medium:71    medium:88   medium:54    medium:54  
##  long  :20    long  :15   long  :46    long  :46  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data.html#cb136-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Length)</span></code></pre></div>
<pre><code>##   [1] short  short  short  short  short  short  short 
##   [8] short  short  short  short  short  short  short 
##  [15] medium medium short  short  medium short  short 
##  [22] short  short  short  short  short  short  short 
##  [29] short  short  short  short  short  short  short 
##  [36] short  short  short  short  short  short  short 
##  [43] short  short  short  short  short  short  short 
##  [50] short  long   medium long   short  medium medium
##  [57] medium short  medium short  short  medium medium
##  [64] medium medium medium medium medium medium medium
##  [71] medium medium medium medium medium medium long  
##  [78] medium medium medium short  short  medium medium
##  [85] short  medium medium medium medium short  short 
##  [92] medium medium short  medium medium medium medium
##  [99] short  medium medium medium long   medium medium
## [106] long   short  long   medium long   medium medium
## [113] long   medium medium medium medium long   long  
## [120] medium long   medium long   medium medium long  
## [127] medium medium medium long   long   long   medium
## [134] medium medium long   medium medium medium long  
## [141] medium long   medium long   medium medium medium
## [148] medium medium medium
## Levels: short &lt; medium &lt; long</code></pre>
<p>Two measures for rank correlation are Kendall’s Tau and Spearman’s Rho.</p>
<p><a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient">Kendall’s Tau Rank Correlation Coefficient</a> measures the
agreement between two rankings (i.e., ordinal features).</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="data.html#cb138-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(xtfrm) <span class="sc">%&gt;%</span> <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">&quot;kendall&quot;</span>)</span></code></pre></div>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Length        1.000      -0.144        0.742
## Sepal.Width        -0.144       1.000       -0.330
## Petal.Length        0.742      -0.330        1.000
## Petal.Width         0.730      -0.315        0.920
##              Petal.Width
## Sepal.Length       0.730
## Sepal.Width       -0.315
## Petal.Length       0.920
## Petal.Width        1.000</code></pre>
<p><strong>Note:</strong> We have to use <code>xtfrm</code> to transform the ordered factors
into ranks, i.e., numbers representing the order.</p>
<p><a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman’s Rho</a>
is equal to the Pearson correlation between the rank values of those two features.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data.html#cb140-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(xtfrm) <span class="sc">%&gt;%</span> <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)</span></code></pre></div>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Length        1.000      -0.157        0.794
## Sepal.Width        -0.157       1.000       -0.366
## Petal.Length        0.794      -0.366        1.000
## Petal.Width         0.784      -0.352        0.940
##              Petal.Width
## Sepal.Length       0.784
## Sepal.Width       -0.352
## Petal.Length       0.940
## Petal.Width        1.000</code></pre>
<p>Spearman’s Rho is much faster to compute on large datasets then Kendall’s Tau.</p>
<p>Comparing the rank correlation results with the Pearson correlation on the original data shows
that they are very similar. This indicates that discretizing data does not result in the loss of
too much information.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data.html#cb142-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span></code></pre></div>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Length        1.000      -0.118        0.872
## Sepal.Width        -0.118       1.000       -0.428
## Petal.Length        0.872      -0.428        1.000
## Petal.Width         0.818      -0.366        0.963
##              Petal.Width
## Sepal.Length       0.818
## Sepal.Width       -0.366
## Petal.Length       0.963
## Petal.Width        1.000</code></pre>
</div>
</div>
<div id="density-estimation" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Density Estimation</h2>
<p><a href="https://en.wikipedia.org/wiki/Density_estimation">Density estimation</a> constructions an estimate of an unobservable probability density function (a distribution) based on observed data.</p>
<p>Just plotting the data is not very helpful for a single feature.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, <span class="at">y =</span> <span class="dv">0</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<div id="histograms" class="section level3" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Histograms</h3>
<p>A <a href="https://en.wikipedia.org/wiki/Histogram">histograms</a> shows more about the distribution by counting how many values fall within a bucket and visualizing the counts as a bar chart.
We use <code>geom_rug</code> to place marks
for the original data points at the bottom of the histogram.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="data.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length)) <span class="sc">+</span></span>
<span id="cb145-2"><a href="data.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb145-3"><a href="data.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p>Two-dimensional distributions can be visualized using
2-d binning or hexagonal bins.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width)) <span class="sc">+</span></span>
<span id="cb147-2"><a href="data.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb147-3"><a href="data.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="data.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width)) <span class="sc">+</span></span>
<span id="cb148-2"><a href="data.html#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb148-3"><a href="data.html#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-55-2.png" width="672" /></p>
</div>
<div id="kernel-density-estimate-kde" class="section level3" number="2.8.2">
<h3><span class="header-section-number">2.8.2</span> Kernel Density Estimate (KDE)</h3>
<p><a href="https://en.wikipedia.org/wiki/Kernel_density_estimation">Kernel density estimation</a>
is used to estimate the probability density function of a feature. It works by replacing each
value with a kernel function (often a Gaussian) and then adding them up. The result is
an estimated probability density function that looks like a smoothed version of the histogram.
The bandwidth (<code>bw</code>) of the kernel controls the amount of smoothing.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="data.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Length)) <span class="sc">+</span></span>
<span id="cb149-2"><a href="data.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">bw =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb149-3"><a href="data.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-56-1.png" width="672" />
Kernel density estimates can also be done in two dimensions. The lines are called contour lines and
indicate density similar to elevation lines on maps.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="data.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length, Sepal.Width)) <span class="sc">+</span></span>
<span id="cb150-2"><a href="data.html#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density2d</span>() <span class="sc">+</span></span>
<span id="cb150-3"><a href="data.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
</div>
</div>
<div id="exploring-data" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Exploring Data</h2>
<div id="basic-statistics" class="section level3" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> Basic statistics</h3>
<p>Get summary statistics (using base R)</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length   Sepal.Width    Petal.Length 
##  Min.   :4.30   Min.   :2.00   Min.   :1.00  
##  1st Qu.:5.10   1st Qu.:2.80   1st Qu.:1.60  
##  Median :5.80   Median :3.00   Median :4.35  
##  Mean   :5.84   Mean   :3.06   Mean   :3.76  
##  3rd Qu.:6.40   3rd Qu.:3.30   3rd Qu.:5.10  
##  Max.   :7.90   Max.   :4.40   Max.   :6.90  
##   Petal.Width        Species  
##  Min.   :0.1   setosa    :50  
##  1st Qu.:0.3   versicolor:50  
##  Median :1.3   virginica :50  
##  Mean   :1.2                  
##  3rd Qu.:1.8                  
##  Max.   :2.5</code></pre>
<p>Get mean and standard deviation for sepal length</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data.html#cb153-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">mean</span>()</span></code></pre></div>
<pre><code>## [1] 5.84</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data.html#cb155-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">sd</span>()</span></code></pre></div>
<pre><code>## [1] 0.828</code></pre>
<p>Ignore missing values (Note: this data does not contain any, but this is
what you would do)</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data.html#cb157-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">mean</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5.84</code></pre>
<p>Robust mean (trim 10% of observations from each end of the distribution)</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data.html#cb159-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">mean</span>(<span class="at">trim =</span> .<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 5.81</code></pre>
<p>Calculate a summary for all numeric columns</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data.html#cb161-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, mean)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         5.84        3.06         3.76        1.20</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data.html#cb163-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, sd)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1        0.828       0.436         1.77       0.762</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data.html#cb165-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, <span class="fu">list</span>(<span class="at">min =</span> min, <span class="at">median =</span> median, <span class="at">max =</span> max))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 12
##   Sepal.Length_min Sepal.Width_min Petal.Length_min
##              &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1              4.3               2                1
## # … with 9 more variables: Petal.Width_min &lt;dbl&gt;,
## #   Sepal.Length_median &lt;dbl&gt;,
## #   Sepal.Width_median &lt;dbl&gt;,
## #   Petal.Length_median &lt;dbl&gt;,
## #   Petal.Width_median &lt;dbl&gt;, Sepal.Length_max &lt;dbl&gt;,
## #   Sepal.Width_max &lt;dbl&gt;, Petal.Length_max &lt;dbl&gt;,
## #   Petal.Width_max &lt;dbl&gt;</code></pre>
<p>MAD (median absolute deviation)</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="data.html#cb167-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, mad)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         1.04       0.445         1.85        1.04</code></pre>
</div>
<div id="tabulate-data" class="section level3" number="2.9.2">
<h3><span class="header-section-number">2.9.2</span> Tabulate data</h3>
<p>Count the number of flowers for each species.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data.html#cb169-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    `n()`
##   &lt;fct&gt;      &lt;int&gt;
## 1 setosa        50
## 2 versicolor    50
## 3 virginica     50</code></pre>
<p>In base R, this can be also done using <code>count(iris$Species)</code>.</p>
<p>We discretize the data using cut.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="data.html#cb171-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.numeric,</span>
<span id="cb171-2"><a href="data.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">cut</span>(x, <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;short&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;long&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb171-3"><a href="data.html#cb171-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-4"><a href="data.html#cb171-4" aria-hidden="true" tabindex="-1"></a>iris_ord</span></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##    &lt;ord&gt;        &lt;ord&gt;       &lt;ord&gt;        &lt;ord&gt;      
##  1 short        medium      short        short      
##  2 short        medium      short        short      
##  3 short        medium      short        short      
##  4 short        medium      short        short      
##  5 short        medium      short        short      
##  6 short        long        short        short      
##  7 short        medium      short        short      
##  8 short        medium      short        short      
##  9 short        medium      short        short      
## 10 short        medium      short        short      
## # … with 140 more rows, and 1 more variable:
## #   Species &lt;fct&gt;</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris_ord)</span></code></pre></div>
<pre><code>##  Sepal.Length Sepal.Width Petal.Length Petal.Width
##  short :59    short :47   short :50    short :50  
##  medium:71    medium:88   medium:54    medium:54  
##  long  :20    long  :15   long  :46    long  :46  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50</code></pre>
<p>Cross tabulation is used to find out if two discrete features are related.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data.html#cb175-1" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> iris_ord <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length, Species) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span>
<span id="cb175-2"><a href="data.html#cb175-2" aria-hidden="true" tabindex="-1"></a>tbl</span></code></pre></div>
<pre><code>##             Species
## Sepal.Length setosa versicolor virginica
##       short      47         11         1
##       medium      3         36        32
##       long        0          3        17</code></pre>
<p>The table contains the number of rows that contain the combination of values (e.g.,
the number of flowers with a short Sepal.Length and species setosa is 47).
If a few cells have very large counts and most others have very low counts, then there might be a
relationship. For the iris data, we see that species setosa has mostly a short Sepal.Length,
while versicolor and virginica have longer sepals.</p>
<p>Creating a cross table with tidyverse is a little more involved and uses pivot
operations and grouping.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data.html#cb177-1" aria-hidden="true" tabindex="-1"></a>iris_ord <span class="sc">%&gt;%</span></span>
<span id="cb177-2"><a href="data.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, Sepal.Length) <span class="sc">%&gt;%</span></span>
<span id="cb177-3"><a href="data.html#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Relationship Between Nominal and Ordinal Features</span></span>
<span id="cb177-4"><a href="data.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Sepal.Length) <span class="sc">%&gt;%</span></span>
<span id="cb177-5"><a href="data.html#cb177-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species, value) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb177-6"><a href="data.html#cb177-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Species, <span class="at">values_from =</span> n)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   value  setosa versicolor virginica
##   &lt;ord&gt;   &lt;int&gt;      &lt;int&gt;     &lt;int&gt;
## 1 short      47         11         1
## 2 medium      3         36        32
## 3 long       NA          3        17</code></pre>
<p>We can use a statistical test to
determine if there is a significant relationship between the two features.
<a href="https://en.wikipedia.org/wiki/Chi-squared_test">Pearson’s chi-squared test</a> for independence is performed with the null hypothesis that the joint distribution of the cell counts in a 2-dimensional contingency table is the product of the row and column marginals. The null hypothesis h0 is independence between rows and columns.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data.html#cb179-1" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> <span class="fu">chisq.test</span>()</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  .
## X-squared = 112, df = 4, p-value &lt;2e-16</code></pre>
<p>The small p-value indicates that the null hypothesis of independence needs to be rejected.
For small counts (cells with counts &lt;5), <a href="https://en.wikipedia.org/wiki/Fisher%27s_exact_test">Fisher’s exact test</a> is better.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fisher.test</span>(tbl)</span></code></pre></div>
<pre><code>## 
##  Fisher&#39;s Exact Test for Count Data
## 
## data:  tbl
## p-value &lt;2e-16
## alternative hypothesis: two.sided</code></pre>
<p>We can use the nominal feature to form groups and then calculate group-wise
statistics for the continuous features. We often use group-wise averages to see
if they differ between groups.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data.html#cb183-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">across</span>(Sepal.Length, mean))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    Sepal.Length
##   &lt;fct&gt;             &lt;dbl&gt;
## 1 setosa             5.01
## 2 versicolor         5.94
## 3 virginica          6.59</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data.html#cb185-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   Species    Sepal.Length Sepal.Width Petal.Length
##   &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1 setosa             5.01        3.43         1.46
## 2 versicolor         5.94        2.77         4.26
## 3 virginica          6.59        2.97         5.55
## # … with 1 more variable: Petal.Width &lt;dbl&gt;</code></pre>
<p>We see that the species viginica has the highest average for all, but Sepal.Width.</p>
</div>
<div id="percentiles-quantiles" class="section level3" number="2.9.3">
<h3><span class="header-section-number">2.9.3</span> Percentiles (Quantiles)</h3>
<p><a href="https://en.wikipedia.org/wiki/Quantile">Quantiles</a>
are cutting points dividing the range of a probability distribution into
continuous intervals with equal probability.
For example, the median is the empirical 50% quantile
dividing the observations into 50% of the observations being smaller than the median and the other 50% being larger than the median.</p>
<p>By default quartiles are calculated. 25% is typically called Q1,
50% is called Q2 or the median and 75% is called Q3.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data.html#cb187-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Petal.Length) <span class="sc">%&gt;%</span> <span class="fu">quantile</span>()</span></code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
## 1.00 1.60 4.35 5.10 6.90</code></pre>
<p>The interquartile range is a measure for variability that is robust against outliers.
It is defined the length Q3 - Q2 which covers the 50% of the data in the middle.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data.html#cb189-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">IQR =</span> <span class="fu">quantile</span>(Petal.Length, <span class="at">probs =</span> <span class="fl">0.75</span>) <span class="sc">-</span> <span class="fu">quantile</span>(Petal.Length, <span class="at">probs =</span> <span class="fl">0.25</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##     IQR
##   &lt;dbl&gt;
## 1   3.5</code></pre>
</div>
</div>
<div id="visualization" class="section level2" number="2.10">
<h2><span class="header-section-number">2.10</span> Visualization</h2>
<div id="histogram" class="section level3" number="2.10.1">
<h3><span class="header-section-number">2.10.1</span> Histogram</h3>
<p>Histograms show the distribution of a single continuous feature.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Petal.Width)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
</div>
<div id="boxplot" class="section level3" number="2.10.2">
<h3><span class="header-section-number">2.10.2</span> Boxplot</h3>
<p>Boxplots are used to compare the distribution of a feature between different groups. The horizontal line in the middle of the boxes are the group-wise medians,
the boxes span the interquartile range. The whiskers (vertical lines) span typically 1.4 times the
interquartile range. Points that fall outside that range are typically outliers shown as dots.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="data.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Species, Sepal.Length)) <span class="sc">+</span> </span>
<span id="cb192-2"><a href="data.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-74-1.png" width="672" />
The group-wise medians can also be calculated directly.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data.html#cb193-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize_if</span>(is.numeric, median)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   Species    Sepal.Length Sepal.Width Petal.Length
##   &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1 setosa              5           3.4         1.5 
## 2 versicolor          5.9         2.8         4.35
## 3 virginica           6.5         3           5.55
## # … with 1 more variable: Petal.Width &lt;dbl&gt;</code></pre>
<p>To compare the distribution of the four features using a ggplot boxplot,
we first have to transform the data into long format (i.e., all feature values are combined into a single column).</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb195-2"><a href="data.html#cb195-2" aria-hidden="true" tabindex="-1"></a>iris_long <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb195-3"><a href="data.html#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris_long, <span class="fu">aes</span>(name, value)) <span class="sc">+</span> </span>
<span id="cb195-4"><a href="data.html#cb195-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-76-1.png" width="672" />
This visualization is only useful if all features have roughly the same range.</p>
</div>
<div id="scatter-plot" class="section level3" number="2.10.3">
<h3><span class="header-section-number">2.10.3</span> Scatter plot</h3>
<p>Scatter plots show the relationship between two continuous features.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="data.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, <span class="at">y =</span> Petal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb196-2"><a href="data.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
</div>
<div id="scatter-plot-matrix" class="section level3" number="2.10.4">
<h3><span class="header-section-number">2.10.4</span> Scatter Plot Matrix</h3>
<p>A scatter plot matrix show the relationship between several features</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="data.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;GGally&quot;</span>)</span>
<span id="cb197-2"><a href="data.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(iris,  <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-78-1.png" width="672" />
The implementation in package <code>GGally</code> also shows additional plots (histograms, density estimates and box plots) and correlation coefficients.</p>
</div>
<div id="data-matrix-visualization" class="section level3" number="2.10.5">
<h3><span class="header-section-number">2.10.5</span> Data Matrix Visualization</h3>
<p>Matrix visualization shows the values in the matrix using a color scale.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="data.html#cb199-1" aria-hidden="true" tabindex="-1"></a>iris_matrix <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span></code></pre></div>
<p>We need the long format for tidyverse.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="data.html#cb200-1" aria-hidden="true" tabindex="-1"></a>iris_long <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris_matrix) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb200-2"><a href="data.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris_long)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##      id name         value
##   &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1     1 Sepal.Length   5.1
## 2     1 Sepal.Width    3.5
## 3     1 Petal.Length   1.4
## 4     1 Petal.Width    0.2
## 5     2 Sepal.Length   4.9
## 6     2 Sepal.Width    3</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="data.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris_long,</span>
<span id="cb202-2"><a href="data.html#cb202-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> name, <span class="at">y =</span> id, <span class="at">fill =</span> value)) <span class="sc">+</span> <span class="fu">geom_tile</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p>Smaller values are darker. Package <code>seriation</code> provides a simpler plotting function.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seriation)</span></code></pre></div>
<pre><code>## Registered S3 methods overwritten by &#39;registry&#39;:
##   method               from 
##   print.registry_field proxy
##   print.registry_entry proxy</code></pre>
<pre><code>## 
## Attaching package: &#39;seriation&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:lattice&#39;:
## 
##     panel.lines</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpimage</span>(iris_matrix, <span class="at">prop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>We can scale the features to z-scores to make them better comparable.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="data.html#cb208-1" aria-hidden="true" tabindex="-1"></a>iris_scaled <span class="ot">&lt;-</span> <span class="fu">scale</span>(iris_matrix)</span>
<span id="cb208-2"><a href="data.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpimage</span>(iris_scaled, <span class="at">prop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<p>This reveals red and blue blocks. Each row is a flower and the flowers in the Iris dataset are
sorted by species. The blue blocks for the top 50 flowers shiw that these flowers are
smaller than average for all but Speal.Width and the red blocks show that the bottom 50 flowers
are larger for most features.</p>
<p>Often, reordering data matrices help with visualization. A reordering technique is called seriation.
Ir reorders rows and columns to place more similar points closer together.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="data.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpimage</span>(iris_scaled, <span class="at">order =</span> <span class="fu">seriate</span>(iris_scaled), <span class="at">prop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-83-1.png" width="672" />
We see that the rows (flowers) are organized from very blue to very red and the
features are reordered to move Sepal.Width all the way to the right because it is very
different from the other features.</p>
</div>
<div id="correlation-matrix" class="section level3" number="2.10.6">
<h3><span class="header-section-number">2.10.6</span> Correlation Matrix</h3>
<p>A correlation matrix contains the correlation between features.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="data.html#cb210-1" aria-hidden="true" tabindex="-1"></a>cm1 <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> as.matrix <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb210-2"><a href="data.html#cb210-2" aria-hidden="true" tabindex="-1"></a>cm1</span></code></pre></div>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Length        1.000      -0.118        0.872
## Sepal.Width        -0.118       1.000       -0.428
## Petal.Length        0.872      -0.428        1.000
## Petal.Width         0.818      -0.366        0.963
##              Petal.Width
## Sepal.Length       0.818
## Sepal.Width       -0.366
## Petal.Length       0.963
## Petal.Width        1.000</code></pre>
<p>Package <code>ggcorrplot</code> provides a visualization for correlation matrices.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="data.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggcorrplot)</span>
<span id="cb212-2"><a href="data.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(cm1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<p>Package <code>seriation</code> provides a reordered version for this plot using a heatmap.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="data.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gghmap</span>(cm1)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<p>Correlations can also be calculates between objects by trnsposing the data matrix.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="data.html#cb214-1" aria-hidden="true" tabindex="-1"></a>cm2 <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>() <span class="sc">%&gt;%</span> <span class="fu">t</span>() <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb214-2"><a href="data.html#cb214-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-3"><a href="data.html#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcorrplot</span>(cm2)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-87-1.png" width="672" />
Object-to-object correlations can be used as a measure of similarity. The dark red blocks
indicate different species.</p>
</div>
<div id="parallel-coordinates-plot" class="section level3" number="2.10.7">
<h3><span class="header-section-number">2.10.7</span> Parallel Coordinates Plot</h3>
<p>Parallel coordinate plots can visualize several featues in a single plot. Lines connect the values
for each object (flower).</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="data.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb215-2"><a href="data.html#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(<span class="fu">as_tibble</span>(iris), <span class="at">columns =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">groupColumn =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p>The plot can be improved by reordering the variables to place correlated features next to each other.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data.html#cb216-1" aria-hidden="true" tabindex="-1"></a>o <span class="ot">&lt;-</span> <span class="fu">seriate</span>(<span class="fu">as.dist</span>(<span class="dv">1</span><span class="sc">-</span><span class="fu">cor</span>(iris[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])), <span class="at">method =</span> <span class="st">&quot;BBURCG&quot;</span>)</span>
<span id="cb216-2"><a href="data.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">get_order</span>(o)</span></code></pre></div>
<pre><code>## Petal.Length  Petal.Width Sepal.Length  Sepal.Width 
##            3            4            1            2</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggparcoord</span>(<span class="fu">as_tibble</span>(iris), <span class="at">columns =</span> <span class="fu">get_order</span>(o), <span class="at">groupColumn =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
</div>
<div id="more-visulizations" class="section level3" number="2.10.8">
<h3><span class="header-section-number">2.10.8</span> More Visulizations</h3>
<p>A well organized collection of visualizations with code can be found at
<a href="https://www.r-graph-gallery.com/">The R Graph Gallery</a>.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-R-arules" class="csl-entry">
Hahsler, M., Buchta, C., Gruen, B., &amp; Hornik, K. (2021). <em>Arules: Mining association rules and frequent itemsets</em>. <a href="https://github.com/mhahsler/arules">https://github.com/mhahsler/arules</a>
</div>
<div id="ref-R-seriation" class="csl-entry">
Hahsler, M., Buchta, C., &amp; Hornik, K. (2021). <em>Seriation: Infrastructure for ordering objects using seriation</em>. <a href="https://github.com/mhahsler/seriation">https://github.com/mhahsler/seriation</a>
</div>
<div id="ref-R-factoextra" class="csl-entry">
Kassambara, A., &amp; Mundt, F. (2020). <em>Factoextra: Extract and visualize the results of multivariate data analyses</em>. <a href="http://www.sthda.com/english/rpkgs/factoextra">http://www.sthda.com/english/rpkgs/factoextra</a>
</div>
<div id="ref-R-caret" class="csl-entry">
Kuhn, M. (2021). <em>Caret: Classification and regression training</em>. <a href="https://github.com/topepo/caret/">https://github.com/topepo/caret/</a>
</div>
<div id="ref-R-proxy" class="csl-entry">
Meyer, D., &amp; Buchta, C. (2021). <em>Proxy: Distance and similarity measures</em>. <a href="https://CRAN.R-project.org/package=proxy">https://CRAN.R-project.org/package=proxy</a>
</div>
<div id="ref-R-GGally" class="csl-entry">
Schloerke, B., Cook, D., Larmarange, J., Briatte, F., Marbach, M., Thoen, E., Elberg, A., &amp; Crowley, J. (2021). <em>GGally: Extension to ggplot2</em>. <a href="https://CRAN.R-project.org/package=GGally">https://CRAN.R-project.org/package=GGally</a>
</div>
<div id="ref-R-plotly" class="csl-entry">
Sievert, C., Parmer, C., Hocking, T., Chamberlain, S., Ram, K., Corvellec, M., &amp; Despouy, P. (2021). <em>Plotly: Create interactive web graphics via plotly.js</em>. <a href="https://CRAN.R-project.org/package=plotly">https://CRAN.R-project.org/package=plotly</a>
</div>
<div id="ref-R-sampling" class="csl-entry">
Tillé, Y., &amp; Matei, A. (2021). <em>Sampling: Survey sampling</em>. <a href="https://CRAN.R-project.org/package=sampling">https://CRAN.R-project.org/package=sampling</a>
</div>
<div id="ref-R-tidyverse" class="csl-entry">
Wickham, H. (2021c). <em>Tidyverse: Easily install and load the tidyverse</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="classification-basic-concepts-and-techniques.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mhahsler/Introduction_to_Data_Mining_R_Examples/blob/master/book_src/02_data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/mhahsler/Introduction_to_Data_Mining_R_Examples/blob/master/book_src/02_data.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
